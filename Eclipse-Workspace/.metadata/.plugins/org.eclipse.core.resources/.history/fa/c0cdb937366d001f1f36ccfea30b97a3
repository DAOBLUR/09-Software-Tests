package utest.evidencia1.tests;

import static org.junit.jupiter.api.Assertions.*;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.params.ParameterizedTest;
import org.junit.jupiter.params.provider.CsvFileSource;

import utest.evidencia1.clases.CircleLinkedList;

class CircleLinkedListTest {

    @Test
    void testAddElements() {
        CircleLinkedList<Integer> list = new CircleLinkedList<>();
        list.append(1);
        list.append(2);
        list.append(3);
        assertEquals(3, list.getSize());
    }

    @Test
    void testRemoveElement() {
        CircleLinkedList<Integer> list = new CircleLinkedList<>();
        list.append(1);
        list.append(2);
        list.append(3);
        
        list.remove(2);
        list.remove(3);
        assertEquals(2, list.getSize());
    }

    @ParameterizedTest(name = "{index} => {0}")
	@CsvFileSource(resources = "/utest/evidencia1/testsResources/datatest02.csv", numLinesToSkip = 1, delimiter = ';')
    void testCicle(int size, String expected) {
CircleLinkedList<Integer> list = new CircleLinkedList<>();
        
        String[] expectedValuesStr = expected.split(",");
        Integer[] expectedValues = new Integer[expectedValuesStr.length];
        
        for (int i = 0; i < expectedValuesStr.length; i++) {
            expectedValues[i] = Integer.parseInt(expectedValuesStr[i].trim());
        }

        for (int i = 1; i <= size; i++) {
            list.append(i);
        }

        CircleLinkedList.Node<Integer> current = list.getHead().getNext();
        
        for (int i = 0; i < size; i++) {
            assertEquals(expectedValues[i], current.getValue(), "Element mismatch at position " + i);
            current = current.getNext();
        }

        assertEquals(list.getHead(), current);
    }
    
    @ParameterizedTest(name = "{index} => {0} -> {1}")
	@CsvFileSource(resources = "/utest/evidencia1/testsResources/datatest01.csv", numLinesToSkip = 1, delimiter = ';')
    void testToString(int size, String expected) {
        CircleLinkedList<Integer> list = new CircleLinkedList<>();
        
        for(Integer i = 1; i <= size; i++) {
			list.append(i);
		}
        
        String value = list.toString();
        assertEquals(expected, value);
    }
}
